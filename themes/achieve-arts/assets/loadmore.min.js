(()=>{"use strict";let e,t,n;function o(e){e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("js-anim__visible"),n.unobserve(e.target))})}function r(){n&&(n.disconnect(),n=null),e=[...document.querySelectorAll(".js-anim")],e.length&&("IntersectionObserver"in window?(t={root:null,rootMargin:"0px",threshold:.25},n=new IntersectionObserver(o,t),e.forEach(e=>{e&&e instanceof Element?n.observe(e):console.error("Invalid DOM element",e)})):(console.error("Intersection Observer API is not avaialble. Fallbacks are being used."),e.forEach(e=>e.classList.add("js-anim__visible"))))}let s,a=parseInt(loadmore_params.current_page),c=parseInt(loadmore_params.max_page),i=!1,d="";function l(){if(i||a>=c)return;i=!0;const e=document.querySelector(".loading-indicator");e&&(e.style.display="block");const t=new FormData;t.append("action","load_more_posts"),t.append("page",a+1),t.append("category_id",d),fetch(loadmore_params.ajaxurl,{method:"POST",body:t}).then(e=>e.json()).then(e=>{if(e.posts&&(document.getElementById("site-content").insertAdjacentHTML("beforeend",e.posts),a=parseInt(e.current_page),c=parseInt(e.max_page),r(),a>=c)){const e=document.getElementById("load-more-trigger");e&&(e.style.display="none"),s&&s.disconnect()}}).catch(e=>{console.error("Error loading posts:",e)}).finally(()=>{i=!1;const e=document.querySelector(".loading-indicator");e&&(e.style.display="none")})}function m(){const e=document.getElementById("load-more-trigger");!e||a>=c||(s&&s.disconnect(),s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!i&&l()})},{root:null,rootMargin:"100px",threshold:.1}),s.observe(e))}document.addEventListener("DOMContentLoaded",function(){if(function(){const e=document.getElementById("category-select");e&&e.addEventListener("change",function(){!function(e){i=!0,d=e,a=1;const t=document.querySelector(".loading-indicator");t&&(t.style.display="block");const n=new FormData;n.append("action","load_more_posts"),n.append("page",1),n.append("category_id",e),fetch(loadmore_params.ajaxurl,{method:"POST",body:n}).then(e=>e.json()).then(e=>{if(e.posts){document.getElementById("site-content").innerHTML=e.posts,a=parseInt(e.current_page),c=parseInt(e.max_page),r();const t=document.getElementById("load-more-trigger");t&&(a>=c?t.style.display="none":(t.style.display="block",m()))}}).catch(e=>{console.error("Error filtering posts:",e)}).finally(()=>{i=!1;const e=document.querySelector(".loading-indicator");e&&(e.style.display="none")})}(this.value)})}(),"IntersectionObserver"in window)m();else{const e=document.getElementById("load-more-trigger");if(e){e.innerHTML='<button id="load-more-btn" class="load-more-btn">Load More Posts</button>';const t=document.getElementById("load-more-btn");t&&t.addEventListener("click",l)}}})})();
//# sourceMappingURL=loadmore.min.js.map