(()=>{"use strict";(()=>{const e=".js-video";let t,n,s,o,i;function a(e){if("false"===e.dataset.autoplay)return!1;const t=window.matchMedia?.("(prefers-reduced-motion: reduce)").matches;return!t}function r(e){e.hasAttribute("muted")||(e.muted=!0),e.hasAttribute("playsinline")||e.setAttribute("playsinline",""),"true"===e.dataset.unmute&&(e.muted=!1)}function c(e){if(e.hasAttribute("data-loaded"))return;const t=Array.from(e.children).filter(e=>"SOURCE"===e.tagName);let n=!1;for(const e of t){const t=e.getAttribute("data-src");t&&(e.src=t,e.removeAttribute("data-src"),n=!0)}if(n&&e.load(),!e.hasAttribute("data-loaded")){const t=()=>{e.setAttribute("data-loaded","true"),e.removeEventListener("loadedmetadata",t)};e.addEventListener("loadedmetadata",t,{once:!0})}}async function l(e){if(e.paused||e.ended)try{await e.play()}catch(e){console.debug("Video play() blocked or failed:",e?.name||e)}}function d(e){e.forEach(e=>{const t=e.target;if(e.isIntersecting){if(c(t),!a(t))return;r(t),t.classList.add("js-video__visible"),t.parentElement?.classList.add("js-video-ready"),l(t)}else t.classList.remove("js-video__visible"),t.paused||t.pause()})}function u(){const t=document.querySelectorAll(e);document.hidden&&t.forEach(e=>{e.paused||e.pause()})}let m,v=!1;function b(){document.body.classList.add("mobile-nav-primer"),clearTimeout(m),m=setTimeout(()=>{document.body.classList.add("mobile-nav-open"),v=!1},300)}function f(){v||(v=!0,document.body.classList.contains("search-pane-open")?b():document.body.classList.contains("mobile-nav-open")?(clearTimeout(m),document.body.classList.remove("mobile-nav-open"),setTimeout(()=>{document.body.classList.remove("mobile-nav-primer"),v=!1},300)):b())}function h(){n=document.querySelector(".js-mobile-nav"),o=document.querySelector(".js-mobile-nav__burger"),n?(s=[...n.querySelectorAll(".js-mobile-nav__toggle")],i=[...n.querySelectorAll(".js-mobile-nav__close")]):(s=[],i=[]),n?(o?o.addEventListener("click",f):console.warn("Expected .js-mobile-nav__burger element is missing."),s.length&&s.forEach(e=>{e.closest(".menu-item").addEventListener("click",function(e){e.target.closest(".menu-item").classList.contains("menu-item-has-children")&&(e.stopPropagation(),e.preventDefault(),function(e){if(v)return;const t=e,n=t.querySelector(".sub-menu");if(n){if(n.style.transition="height 300ms ease-in-out",t.classList.contains("sub-menu__open"))n.style.height="0",n.addEventListener("transitionend",()=>{n.style.transition="",n.style.height="",t.classList.remove("sub-menu__open")},{once:!0});else{const e=n.scrollHeight+"px";n.style.height=e,t.classList.add("sub-menu__open"),n.addEventListener("transitionend",()=>{n.style.transition=""},{once:!0})}v=!1}}(e.currentTarget))})}),i.length&&i.forEach(e=>{e.addEventListener("click",function(){f()})})):console.warn("Expected .js-mobile-nav element is missing.")}window.addEventListener("DOMContentLoaded",()=>{h(),function(){const n=Array.from(document.querySelectorAll(e)).filter(e=>e instanceof HTMLVideoElement);if(!n.length)return console.warn(`No video elements found matching selector: ${e}`),{cleanup(){}};if(!("IntersectionObserver"in window))return console.error("IntersectionObserver not available: playing all videos as fallback."),n.forEach(e=>{c(e),a(e)&&(r(e),e.classList.add("js-video__visible"),e.parentElement?.classList.add("js-video-ready"),l(e))}),{cleanup(){}};t=new IntersectionObserver(d,{root:null,rootMargin:"200px 0px",threshold:.4}),n.forEach(e=>t.observe(e)),document.addEventListener("visibilitychange",u)}()})})()})();
//# sourceMappingURL=main.min.js.map